var express=require("express"),router=express.Router(),maindb=require("../service/DBService.js"),ObjectID=require("mongodb").ObjectID,assert=require("assert"),randomstring=require("randomstring"),jwt=require("jsonwebtoken"),jwtSecret="kjwdjs65$ikksop0982shj";router.get("/",function(e,n){n.sendFile("../public/index.html")}),router.get("/google1db5d98c04cba720",function(e,n){n.sendFile("../public/google1db5d98c04cba720.html")}),router.get("/eventlist",function(e,n){maindb(function(e){e.collection("event").find().toArray(function(e,t){n.send(t)})})}),router.get("/event/:name",function(e,n){console.log(),maindb(function(t){t.collection("event").findOne({event:e.params.name},function(e,t){n.send(t)})})}),router.post("/addQuery",function(e,n){console.log(e.body),maindb(function(t){t.collection("query").save(e.body).then(function(e){n.send(e)})})}),router.get("/query/:id",function(e,n){var t=new ObjectID(e.params.id);maindb(function(e){e.collection("query").findOne({_id:t},function(e,t){n.send(t)})})}),module.exports=router;