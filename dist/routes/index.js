var express=require("express"),router=express.Router(),async=require("async"),maindb=require("../service/DBService.js"),ObjectID=require("mongodb").ObjectID,assert=require("assert"),randomstring=require("randomstring"),jwt=require("jsonwebtoken"),jwtSecret="kjwdjs65$ikksop0982shj";router.get("/",function(e,n){n.sendFile("../public/index.html")}),router.get("/eventlist",function(e,n){maindb(function(e){e.collection("event").find().toArray(function(e,r){n.send(r)})})}),router.get("/event/:name",function(e,n){console.log(),maindb(function(r){r.collection("event").findOne({event:e.params.name},function(e,r){n.send(r)})})}),router.post("/addQuery",function(e,n){console.log(e.body),maindb(function(r){r.collection("query").save(e.body).then(function(e){n.send(e)})})}),router.get("/query/:id",function(e,n){var r=new ObjectID(e.params.id);maindb(function(e){e.collection("query").findOne({_id:r},function(e,r){n.send(r)})})}),module.exports=router;